<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<title>Socket.IO chat</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font: 13px Helvetica, Arial;
    background-image: url("data:image/jpeg;base64,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");
    /* background-size: 500px; */
    background-size: cover;
    background-repeat: no-repeat;
  }

  form {
    background: #000;
    padding: 3px;
    position: fixed;
    bottom: 0;
    width: 100%;
  }

  form input {
    border: 0;
    padding: 10px;
    width: 90%;
    margin-right: .5%;
  }

  form button {
    width: 9%;
    background: rgb(130, 224, 255);
    border: none;
    padding: 10px;
  }

  #messages {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  #messages li {
    padding: 5px 10px;
  }

  #messages li:nth-child(odd) {
    background: #eee;
  }

  #messages {
    margin-bottom: 40px
  }

  #heade {
    background-color: mediumblue;
    color: white;
  }


  .left {
    text-align: left;
  }

  .right {
    text-align: right;
  }

  .container {
    border: 2px solid #dedede;
    background-color: #f1f1f1;
    border-radius: 5px;
    padding: 10px;
    margin-left: 500px;
    margin-right: 500px;
  }

  .darker {
    border-color: #ccc;
    background-color: #ddd;
  }

  .container::after {
    content: "";
    clear: both;
    display: table;
  }

  .centered {
    position: absolute;
    margin-top: 90px;
    height: 100%;
    width: 100%;
    top: 0px;
    bottom: 0px;
    left: 0px;
    right: 0px;
  }

  .sml-10 {
    width: 220px;
  }

  .text-field {
    margin-bottom: 30px;
  }

  .input {
    position: relative;
  }

  input {
    height: 20px;
    width: 255px;
    border: none;
    outline: none;
    color: #797979;
  }

  /* .line{
    .transition(all 150ms ease-in-out);
    stroke:#dadada;
  } */

  .content {
    position: absolute;
    margin: auto;
    height: 50px;
    width: 260px;
    top: 50px;
    left: 0px;
    right: 0px;
  }

  .id,
  .id2 {
    display: none;
  }

  fieldset {
    border: 1px solid #ddd !important;
    margin: 0;
    padding: 10px;
    position: relative;
    border-radius: 4px;
    background-color: #f5f5f5;
    padding-left: 10px !important;
  }

  legend {
    font-size: 14px;
    font-weight: bold;
    margin-bottom: 0px;
    width: 35%;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 5px 5px 5px 10px;
    background-color: #ffffff;
  }

  #heade {
    background-image:url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0_9Y8hfyAJrIkXBZrRPqZiXL0wIkS3i2nnU7VJkxVg10IM2bL");
    background-size: cover;
    background-repeat: no-repeat;
  }
  #chat{
   
    margin-top: 25%;
  }

  .card-body{
        background-color: violet;
        border:"5px";
        border-color: blue;
  }
</style>
</head>

<body>

<div id ="try2">
  <div id ="messanger">
    <img style="margin-left: 30% ;float:left; margin-top: 10%" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSCbvev-sQCG7U0Pdwt6XELQtFLQpH7NRqgLvu6vMX3Wvo_EcCCVQ" alt="picture">
  <button  id = "chat" type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
    Chat Now
  </button>
</div>

  <!-- The Modal -->
  <div class="modal" id="myModal">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Provide your Username</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="form-group">
            <label for="usr">Username:</label>
            <!-- id = "username" -->
            <input type="text" class="form-control" id="usr">
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" id="try" class="btn btn-danger" data-dismiss="modal">Send</button>
        </div>

      </div>
    </div>
  </div>

  </div>
</div>

  <!-- </div>
    <button style = "margin-top: 25%;margin-left: 50%" type="button" id = "try" class="btn btn-primary">Chat Now</button>
  </div> -->


  <div class="id2">
    <div id='heade' class="jumbotron text-center">
      <h1>Welcome to Messenger</h1>
      <p>Find someone to chat now!</p>
    </div>

    <div class="row">
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <a href="#" class="btn btn-primary">Active Users</a>
            <br> <br>
            <br>
            <div id='online'>
            </div>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <center>
              </cente><a href="#" class="btn btn-primary">Chat Here</a></center>
            <br> <br>
            <div id='message-container'>
            </div>
            <!-- <ul id="messages"></ul> -->
            <form id='send-container'>
                <div class="input-group mb-3 input-group-lg">
                    <div class="input-group-prepend">
                      <span class="input-group-text">Type Message</span>
                    </div>
                    <input id="message-input" type="text" class="form-control">
                  </div>
              <!-- <input id="message-input" autocomplete="off" /><button id='send-button'>Send</button> -->
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>










  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
// show and hide the UI 
    $(document).ready(function () {
      $("#try").click(function () {
        $(".f").hide();
        $(".id2").show();
        $('#try').hide();
        $("#try2").hide();
      });
    })

    $(function () {
      // variables
      const socket = io();
      const messageForm = document.getElementById('send-conatainer')
      const messageInput = document.getElementById('message-input')
      const messageContainer = document.getElementById('message-container')
      const UserContainer = document.getElementById('online')
      const users = [];


      // getting the value of Username
      $("#try").click(function () {
        const namei = $('#usr').val();
        socket.emit('newuser', { name: namei });
        socket.emit('userconnected', { name: namei });
      
      users.push(namei);
      // Notify that the user join
      appendMessage('you joined');
     
      // putting up a nickname
      socket.on('newuser', data => {
        addUser(data.name + ' is active');
        console.log(data.name)
      })

      // Message that a user is connected
      socket.on('userconnected', data => {
        appendMessage(data.name + ' :' + ' connected');
      })

      // if a message is inputed in the user it sends to right and left to the reciever
      socket.on('chatmessage', data => {
        if (data.name == namei) {
          appendMessage(data.msg, "right");
        } else {
          appendMessage(data.name + ": " + data.msg, "left");
        }

      })

      // when message is submitted
      $('form').submit(function (e) {
        e.preventDefault()
        const message = messageInput.value
        $('#message-input').val('typing ........');
        socket.emit('chatmessage', { name: namei, msg: message });
        $('#message-input').val('');
        return false;
      })




      // creating another container for the message
      function appendMessage(message, cls) {
        const messageElement = document.createElement('div')
        messageElement.classList.add(cls);
        messageElement.innerText = message
        messageContainer.append(messageElement)
      }

        // creating a container for the active users
      function addUser(name) {
        const newUser = document.createElement('div')
        newUser.innerText = name;
        UserContainer.append(newUser);
      }


    })
})


  </script>
</body>

</html>